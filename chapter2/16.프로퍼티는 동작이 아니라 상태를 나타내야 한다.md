# μ•„μ΄ν…16. ν”„λ΅νΌν‹°λ” λ™μ‘μ΄ μ•„λ‹λΌ μƒνƒλ¥Ό λ‚νƒ€λ‚΄μ•Ό ν•λ‹¤
μ½”ν‹€λ¦°μ ν”„λ΅νΌν‹°λ” μλ°”μ ν•„λ“μ™€ λΉ„μ·ν•΄ λ³΄μ΄μ§€λ§ μ„λ΅ μ™„μ „ λ‹¤λ¥Έ κ°λ…μ΄λ‹¤.
λ‘λ‹¤ λ°μ΄ν„°λ¥Ό μ €μ¥ν•λ‹¤λ” μ μ€ κ°™λ‹¤
ν”„λ΅νΌν‹°λ” μ‚¬μ©μ μ •μ μ„Έν„°μ™€ κ²ν„°λ¥Ό κ°€μ§ μ μλ‹¤.

```kotlin
//μ½”ν‹€λ¦°μ ν”„λ΅νΌν‹°
val name: String? = null
```
```java
//μλ°”μ ν•„λ“
String name = null;
```
val μ½κΈ°μ „μ© ν”„λ΅νΌν‹°λ¥Ό λ§λ“¤λ•λ” feildκ°€ λ§λ“¤μ–΄ μ§€μ§€ μ•λ”λ‹¤.

λ§μ•½ getter, setterλ¥Ό λ³€κ²½ν•κ³  μ‹¶λ‹¤λ©΄ ν”„λ΅νΌν‹°μ λ°μ΄ν„°λ¥Ό μ €μ¥ν•΄λ‘λ” backing fieldμ— λ€ν• λ νΌλ°μ¤μΈ `field`λ¥Ό μ‚¬μ©ν•λ©΄ λ©λ‹λ‹¤.
```kotlin
class Person(name: String) {
    var name = name
        get() = field
        set(value) {
            field = value
        }
}
```

#
ν”„λ΅νΌν‹°λ¥Ό ν†µν• `getter, setter`μ ‘κ·Όμ€ ν•„λ“μ™€ λ‹¤λ¥Ό μ μμµλ‹λ‹¤. μλ¥Ό λ“¤μ–΄ μ•„λμ½”λ“μ²λΌ μ½”λ“λ¥Ό μ‘μ„±ν•  μλ„ μμµλ‹λ‹¤.
```kotlin
var date: Date
    get() = Date(millis) // λ§¤λ² Date κ°μ²΄λ¥Ό μƒμ„±ν•©λ‹λ‹¤.
    set(value){
        // κ°μ²΄λ” millis ν•„λ“λ§ κ°€μ§‘λ‹λ‹¤.
        millis = value.time 
    }
```

μ¦‰ ν•„λ“κ°€ μ—†λ”λΌλ„ ν”„λ΅νΌν‹°λ¥Ό μ •μν•  μ μμµλ‹λ‹¤. κ·Έλμ„ μ½”ν‹€λ¦°μ μΈν„°νμ΄μ¤μ—μ„ ν”„λ΅νΌν‹°λ¥Ό μ„ μ–Έν•λ”λΌλ„ μ‚¬μ©ν•΄λ„ μ•„λ¬΄λ° λ¬Έμ κ°€ λμ§€ μ•μµλ‹λ‹¤.
```kotlin
interface Person {
    val name: String // μ΄λ” ν”„λ΅νΌν‹°μ΄μ§€, ν•„λ“κ°€ μ•„λ‹™λ‹λ‹¤.
}
```
```kotlin
open class Computer{
    open val theAnswer: Long = 42
}

class AppleComputer : Computer(){
    override val theAnswer: Long = 1_800_275
}
```

#

μ΄λ¬ν• μ›λ¦¬ λ•λ¶„μ— μ½”ν‹€λ¦°μ—μ„λ” **ν”„λ΅νΌν‹° μ„μ„(property delegation)** μ΄λΌλ” μ¬λ°λ” κΈ°λ¥μ΄ μμµλ‹λ‹¤. μ΄λ” `getter setter`λ¥Ό λ‹¤λ¥Έ κ°μ²΄λ‚ ν•¨μμ— μ„μ„ ν•  μ μλ” κΈ°λ¥μΈλ°, μ΄λ” `μ•„μ΄ν… 21. μΌλ°μ μΈ ν”„λ΅νΌν‹° ν¨ν„΄μ€ ν”„λ΅νΌν‹° μ„μ„μΌλ΅ λ§λ“¤μ–΄λΌ`μ—μ„ ν•λ² λ” μ–ΈκΈ‰ν•κ² μµλ‹λ‹¤.
```kotlin
// μ½”ν‹€λ¦°μ—μ„ μ κ³µν•λ” ν‘μ¤€ λ€λ¦¬μ lazy() ν•¨μμ— ν”„λ΅νΌν‹°λ¥Ό μ„μ„ν•©λ‹λ‹¤.
val db: Database by lazy { connectToDb() }
```
```kotlin
var topLevelInt: Int = 0
class ClassWithDelegate(val anotherClassInt: Int)


class MyClass(var memberInt: Int, val anotherClassInstance: ClassWithDelegate) {
    var delegatedToMember: Int by this::memberInt // κ°™μ€ ν΄λμ¤ λ©¤λ²„μ— μ„μ„
    var delegatedToTopLevel: Int by ::topLevelInt // μµμƒμ„ ν”„λ΅νΌν‹°μ— μ„μ„

    // λ‹¤λ¥Έ ν΄λμ¤ μΈμ¤ν„΄μ¤μ— μ„μ„
    val delegatedToAnotherClass: Int by anotherClassInstance::anotherClassInt
}

// ν™•μ¥ ν”„λ΅νΌν‹°λ„ λ™μΌν•κ² μ„μ„ν•  μ μμµλ‹λ‹¤.
var MyClass.extDelegated: Int by ::topLevelInt
```
#
π“ μ°Έκ³ λ΅ ν”„λ΅νΌν‹°λΏλ§ μ•„λ‹λΌ μΈν„°νμ΄μ¤μ μΈμ¤ν„΄μ¤λ¥Ό νλΌλ©”νƒ€μ— μ„μ„ν•  μ μμµλ‹λ‹¤. λ§μΉ μ¤ν”„λ§ μ»¨ν…μ΄λ„μ DI μ²λΌ λ§μ΄μ£ . μ΄λ¥Ό `Class Delegation`μ΄λΌ λ¶€λ¦…λ‹λ‹¤.
<details markdown="1">
<summary> λ”λ³΄κΈ° </summary>

```kotlin
interface UserRepository{
    fun getById(id: Int):Customer
    fun getAll(): List<Customer>
}

interface Logger{
    fun logAll()
}
```
```kotlin
class UserServie{
    repository: UserRepository,
    logger: Logger
} : UserRepository by repository, Logger by logger
// UserRepository μΈν„°νμ΄μ¤ κµ¬ν„μ€ repository νλΌλ©”νƒ€μ— μ„μ„
// Logger μΈν„°νμ΄μ¤ κµ¬ν„μ€ logger νλΌλ©”νƒ€μ— μ„μ„
```
μ„ μ½”λ“λ” μ•„λμ μ½”ν‹€λ¦° μ½”λ“μ™€ κ°™μ€ λ™μ‘μ…λ‹λ‹¤.
```kotlin
class UserService(
    val repository: UserRepository,
    val logger: Logger
) : UserRepository, Logger{
    override fun getById(id: Int) = repository.getById(id)
    override fun getAll(): List<Customer> = repository.getAll()
    
    override fun logAll() = logger.logAll()
}
```
</details>

#

## π“ ν”„λ΅νΌν‹°λ¥Ό ν•¨μλ΅ μ‚¬μ©ν•μ§€ λ§μ„Έμ”.
μ΄λ¬ν• νΉμ„±λ•λ¬Έμ— μ½”ν‹€λ¦°μ—μ„λ” ν”„λ΅νΌν‹°μ— ν™•μ¥ν•¨μλ¥Ό μ¶”κ°€ν•κ±°λ‚, νΉλ³„ν• λ™μ‘μ„ ν•λ„λ΅ λ§λ“¤ μ μμµλ‹λ‹¤.
```kotlin
// κ°€λ¥μ€ ν•μ§€λ§, μ΄λ ‡κ² μ“°μ§€ λ§μ„Έμ”!
val Tree<Int>.sum: Int
    get() = when(this){
        is Leaf -> value
        is Node -> left.sum + right.sum
    }
```

ν”„λ΅νΌν‹°μ— μ•κ³ λ¦¬μ¦ λ΅μ§μ΄ λ“¤μ–΄κ°€λ” κ²ƒμ€ μΆ‹μ§€μ•μµλ‹λ‹¤. μ΄λ¬ν• ν”„λ΅νΌν‹°λ” μ—¬λ¬κ°€μ§€ μ¤ν•΄μ™€ μλ»λ μ‚¬μ©μ„ μΌμΌν‚¬ μ μμµλ‹λ‹¤.
- ν”„λ΅νΌν‹°μ— λΉ„μ¦λ‹μ¤ λ΅μ§μ΄ ν¬ν•¨λμ–΄μμΌλ©΄, κ°μ²΄κ°€ μ–΄λ–»κ² λ™μ‘ν• μ§€ μμΈ΅ν•κΈ° μ–΄λ µμµλ‹λ‹¤.
- `get`μ λ©±λ“±μ„±μ΄ κΉ¨μ§ μ μμµλ‹λ‹¤. ν•¨μλ¥Ό μ—¬λ¬λ² νΈμ¶ν•κ²λλ©΄, λ°ν™κ°’μ΄ λ‹¬λΌμ§ μ μμµλ‹λ‹¤.
- νƒ€μ… λ³€ν™μ κ²½μ°μ—λ„, `Int.toDouble()` κ°™μ€ ν•¨μλ¥Ό μ‚¬μ©ν•μ§€, ν”„λ΅νΌν‹°μ—μ„ λ³€ν™μ„ μ²λ¦¬ν• κ±°λΌ μμƒν•κΈ° μ–΄λ µμµλ‹λ‹¤.
- λ³΄ν†µ ν”„λ΅νΌν‹°`getter, setter`κ°€ μ—°μ‚°λΉ„μ©μ΄ λ†’λ‹¤κ³  μƒκ°ν•μ§€ μ•μµλ‹λ‹¤. μ΄λ” κ°λ°μμ μµμ ν™” λ€μƒμ—μ„ λΉ μ§€κ² λ©λ‹λ‹¤.
- κ΄€μµμ μΌλ΅ `getter, setter`κ°€ κ°μ²΄μ μƒνƒλ¥Ό λ³€ν™”μ‹ν‚¬κ±°λΌκ³  μƒκ°ν•μ§€ μ•μµλ‹λ‹¤.

##
λ”°λΌμ„ ν”„λ΅νΌν‹°`getter, setter` μ΄μƒμ κΈ°λ¥μ€ μ•„λμ™€ κ°™μ΄ `λ³„λ„μ ν•¨μ`λ΅ μ •μν•λ” κ²ƒμ΄ μΆ‹μµλ‹λ‹¤.
```kotlin
fun Tree<Int>.sum: Int = when(this) {
    is Leaf -> value
    is Node -> left.sum() + right.sum()
}
```
##
μ΄λ” ν‘μ¤€ λΌμ΄λΈλ¬λ¦¬λ„ λ§μ°¬κ°€μ§€μ…λ‹λ‹¤. μ•„λμ™€ κ°™μ€ ν‘μ¤€ ν•¨μμ κµ¬ν„ μ½”λ“λ¥Ό λ³΄λ©΄, ν”„λ΅νΌν‹°μ ν™•μ¥ν•¨μκ°€ μ•„λ‹λΌ λ³„λ„μ ν•¨μλ΅ μ •μλμ–΄ μμμ„ μ• μ μμµλ‹λ‹¤.
```kotlin
val s = (1..100).sum()
```

λ§μ€ κ°λ°μλ“¤μ€ κ²½ν—μ μΌλ΅ ν”„λ΅νΌν‹°λ” μƒνƒλ¥Ό λ‚νƒ€λ‚΄κ³ , ν•¨μλ” ν–‰λ™μ€ λ‚νƒ€λ‚Έλ‹¤κ³  μƒκ°ν•©λ‹λ‹¤.  
ν”„λ΅νΌν‹°λ” λ™μ‘μ΄ μ•„λ‹λΌ μƒνƒλ¥Ό λ‚νƒ€λ‚΄μ•Ό ν•©λ‹λ‹¤.